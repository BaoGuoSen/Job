#### 为什么需要https
1. 因为http有三大致命风险
- 明文传输，容易被监听窃取
- 数据的完整性未校验，被篡改
- 未验证对方身份，被冒充

#### ssl握手流程
1. Client发出请求（包含）
- 支持的加密协议方法，版本
- 客户端生成的随机数（用于之后生成密钥）
- 支持的压缩方法

2. Server回应
- 确认使用的加密协议方法版本
- 服务器生成的随机数（用于之后生成密钥）
- 证书（包含公钥）

3. 客户端收到服务端的证书并验证证书的合法性（防止中间人攻击），如果有效则向服务器发送请求
- 一个随机数（用公钥加密）
- 编码改变通知（随后的信息将使用双方协定的加密方法通信）
- 客户端握手结束通知

4. 服务端收到客户端的第三个随机数之后计算生成本次会话所用的‘会话密钥’，服务端最后响应，
- 编码改变通知
- 服务端握手结束通知

#### 为什么需要三个随机数
-  不管是客户端还是服务端都需要随机数，这样才能保证每次生成的密钥都不一样，而且ssl协议整数是静态的，需要随机数来保证密钥的随机性

- ssl协议不相信每个主机都能产生完全随机的随机数；所以引入了第三个随机数（pre-master key)

#### https的加密方式
- 对称加密+非对称加密
- 非对称加密发生在握手阶段
- 对称加密发生在正式通信阶段
- 因为非对称加密损耗的性能比对称加密大，为了安全和效率使用了对称加密和非对称加密结合的方式

#### 中间人攻击
1. 发生的阶段
- 发生在客户端和服务端确认对称加密密钥阶段
2. 如何攻击
- 截取通信内容，替换为中间人的恶意内容
3. 如何防止
1. 证书
- 通信的内容都会携带证书标识，无法伪造，而且用了公钥加密，私钥只有服务端才有，中间人无法破解；
- 那如果一开始中间人就将证书替换为自己的呢，（证书的申请非常严格，不能被伪造）
