## 虚拟树的原理
- 用js的计算性能换取操作真实Dom的性能消耗；

## Diff过程
1. 对树的操作有，创建节点，删除节点，更新节点，移动节点；
2. diff的五种情况 
- 新前与旧前（如果相等，直接patch，移动新旧节点的起始下标）
- 新后与旧后（如果相等，直接patch，移动新旧节点的结束下标）
- 新前与旧后 (如果相等，先patch，将旧后移动到未处理节点之前，移动相应的新前下标和旧后下标)
- 新后与旧新 (如果相等，先patch，将旧新移动到未处理节点之后，移动相应的新后下标和旧新下标)
- 如果上述四种情况都不存在，直接常规的循环对比patch
3. diff结束条件
- 新前下标大于新后下标，说明新树已经构建完成，剩余的旧树节点全部删除；
- 旧前下标大于旧后下标，说明旧树节点全部被复用了，剩余节点全部新建；

## patch过程
1. 新旧节点是否完全一样
- 是，退出
- 否，next
2. 新旧节点是否都为静态节点
- 是，退出
- 否，next
3. 新节点是否有text属性
- 否，next
- 是
  1. 新旧节点文本属性是否不同
  - 是， 替换
4. 新旧节点是否都有子节点
- 否，next
- 是
  1. 新旧节点的子节点是否不同
  - 是，对子节点patch
5. 是否只有新节点有子节点
- 否，next
- 是
  1. 旧节点是否有文本
  - 是，清空文本，将新节点的子节点添加到旧节点中
  - 否，将新节点的子节点添加到旧节点中
6. 是否只有旧节点有子节点
- 是，清空子节点
- 否，next
7. 新旧节点都没有子节点，旧节点有文本
- 清空文本

## patch流程图
<img src="https://github.com/BaoGuoSen/Job/blob/master/imgs/patch.png" alt="图片替换文本" width="800" height="1000" align="bottom" />
