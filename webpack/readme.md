## HMR
<img src="https://github.com/BaoGuoSen/Job/blob/master/imgs/Webpack%E7%83%AD%E6%9B%B4%E6%96%B0.png" alt="图片替换文本" width="800" height="613" align="bottom" />

1. webpack监听源文件的变化，会触发webpack重新编译
2. 每次编译会产生hash值，新的json文件，新的模块代码js文件；编译完成会通过sockjs向客户端推送hash值；
3. 客户端的webpack-dev-server会收到这个hash值，和之前对比
- 一致则走缓存；
- 不一致则判断是否支持热更新
- 如果支持热更新，则通过ajax和jsonp向服务器获得新的json文件，
- 不支持则刷新浏览器
4. 通过hotmodule插件更新已修改资源；
## webpack的构建流程是怎样的
webpack的构建流程是一个串行的过程；
1. 初始化参数：从配置文件和shell语句中读取与合并参数，得出最终的参数；
2. 开始编译：用上一步得到的参数初始化Compliier对象，加载所有配置的插件，通过执行对象的run方法开始执行编译；
3. 确定入口：根据配置文件中的entry找出所有的入口文件；
4. 编译模块：从入口文件出发，调用所有配置的loder对模块进行加载，在找出该模块依赖的模块，递归此步骤，对该入口文件的所有模块都进行了处理；
5. 完成编译模块：得到了每个模块被加载之后的最终内容以及他们之间的依赖关系；
6. 输出资源：根据入口和模块之间的依赖关系，得到包含多个模块的chunk代码块，在将每个代码块转换成一个单独的文件加入到输出列表；
7. 输出完成：确定了输出内容之后，根据配置确定输出的路径和文件名，写入到文件系统；
## webpack打包优化；
1. 压缩代码：利用插件对文件进行压缩
2. 使用CDN引入外部静态文件
3. TreeShaking:删除无用的代码；
4. 按需加载
5. 通过DLLplugin提前打包指定的类；
