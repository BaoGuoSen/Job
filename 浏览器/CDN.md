##### 参考链接：https://juejin.im/post/6844903873518239752

## CDN
<img src="https://user-gold-cdn.xitu.io/2019/6/24/16b87f0340a17453?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" 
alt="cdn过程图" width="800" height="613" align="bottom" /><br>

1. 用户发起http请求，现在hosts文件找是否有缓存，如果没有，向本地DNS的缓存，还没有就向根域名服务器获取请求地址的ip地址，没有就向顶级域名服务器发送，往下查找。
2. 然后最后会找到Cname指向的全局负载均衡设备，DNS系统最终会将域名的解析权交给CNAME指向的CDN专用DNS服务器；
3. 专用DNS服务器将CDN的全局负载均衡设备的ip地址返回给客户端；
4. 客户端向全局负载均衡服务器发送请求，全局负载均衡设备根据用户的ip地址及请求内容
选择一台用户所属区域的区域负载均衡设备的ip地址返回；
5. 区域负载均衡设备根据用户的ip地址，请求内容，各个缓存服务器的负载情况，将最优的一台缓存服务器的ip地址返回给客户端
6. 然后客户端向该缓存服务器发送请求即可获得响应内容；如果缓存服务器的资源不存在或者已经过期，则向源站更新资源后在返回最新的资源。


